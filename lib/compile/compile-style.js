"use strict";var fs=require("fs"),path=require("path"),util=require("../utils/util"),projectPath=process.cwd();function compileStyle(l,e){var i=util.getRelativePath(l);if(0<l.indexOf(".xu")){var t=util.getStyle(e,l),s=i.replace(".xu",".wxss");util.writeFile(path.resolve(projectPath,s),t||""),util.log(" [写入wxss文件]".green+" dist"+s)}else 0<l.indexOf(".less")?filterComplie(l,"less").then(function(){var e=util.compileStyle(l,"less"),t=i.replace(".less",".wxss");util.writeFile(path.resolve(projectPath,t),e||""),util.log(" [写入wxss文件]".green+" dist"+t)}):0<=l.indexOf(".wxss")&&filterComplie(l,"wxss").then(function(){var e=util.compileStyle(l,"wxss");util.writeFile(path.resolve(projectPath,i),e||""),util.log(" [写入wxss文件]".green+" dist"+i)})}function filterComplie(i,s){return new Promise(function(e,t){var l=i.replace("."+s,".xu");util.hasXuFile(l)?compileStyle(l,util.readFile(l)):e()})}exports=module.exports=compileStyle;