"use strict";var _util=require("./utils/util"),_util2=_interopRequireDefault(_util),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_path=require("path"),_path2=_interopRequireDefault(_path),_request=require("request"),_request2=_interopRequireDefault(_request),_unzipper=require("unzipper"),_unzipper2=_interopRequireDefault(_unzipper);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports=module.exports=function(e,t,r){if(e&&t){var u=process.cwd(),l=["wexp-demo","wexp-cli","wexp","wexp-redux","wexp-redux-demo"];if(0<=l.indexOf(e)){if(_fs2.default.existsSync(_path2.default.resolve(u,t)))return void _util2.default.log(("已存在"+t+"文件夹，请重新命名").red);var i=_request2.default.get("https://github.com/Chaunjie/"+e+"/archive/master.zip").pipe(_fs2.default.createWriteStream(""+_path2.default.resolve(u,"download.zip")));_util2.default.log(("模版初始化中...："+u+"/"+t+"/ ...").blue),i.on("close",function(){_util2.default.log("模版初始化完成".green),_fs2.default.createReadStream(""+_path2.default.resolve(u,"download.zip")).pipe(_unzipper2.default.Extract({path:_path2.default.resolve(u,"./")})).promise().then(function(){try{_fs2.default.renameSync(_path2.default.resolve(u,e+"-master"),_path2.default.resolve(u,t)),_fs2.default.unlinkSync(_path2.default.resolve(u,"download.zip"))}catch(e){_util2.default.log("初始化模版失败".red)}},function(e){return console.log("error",e)})})}else{var a=JSON.stringify(l);_util2.default.log(("wexp-cli支持以下模板："+a).gray)}}else _util2.default.log("正确命令例子：wexp init wexp-demo myproject".red)};